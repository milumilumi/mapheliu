<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>河流地图</title>
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <!-- 地图容器 -->
    <div id="map"></div>

    <script>
      let map;

      function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: -12, lng: 38 }, // 莫桑比克附近
          zoom: 6
        });

        // 加载GeoJSON（必须是同目录下的heliu.json）
        fetch('heliu.json')
          .then(res => res.json())
          .then(data => {
            // 修正经纬度顺序
            data.features.forEach(f => {
              if (f.geometry && f.geometry.type === "LineString") {
                f.geometry.coordinates = f.geometry.coordinates.map(coord => [coord[1], coord[0]]);
              }
            });

            map.data.addGeoJson(data);

            // 样式
            map.data.setStyle({
              strokeColor: '#0000FF',
              strokeWeight: 3
            });
          })
          .catch(err => console.error('加载 GeoJSON 失败:', err));
      }
    </script>

    <!-- 用老版 JS API 正确加载 -->
    <script async
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD1DDVsoYSslYif9JG1EmZt04uUWiZGJgE&callback=initMap">
    </script>
  </body>
</html>
